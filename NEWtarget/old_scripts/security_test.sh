#!/bin/sh
trap 'echo "# $BASH_COMMAND"' DEBUG
read MACHINES
for i in $MACHINES;do ssh -tA -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -q -A ticket_id=9999@sls4root@10.224.64.69 --command sls -c root@$i "'logger -p auth.info "PHC MAINTANANCE - MANUAL HEALTH CHECK"date&&echo&&echo&&hostname&&echo&&echo&&echo ********IFCONFIG*******&&ifconfig -a&&echo &&echo &&echo **************CONTENTS OF APPLICATIONS FOLDER************** &&echo &&echo &&ls -l /applications&&echo &&echo &&echo **********THIS IS THE UPTIME************ &&echo &&echo &&uptime &&echo &&echo &&echo *************** ALL PROCESSES RUNNING NOW******************* &&echo &&echo &&ps -ef &&echo &&echo &&echo &&echo &&echo *****************OPEN PORT CONNECTIONS************* &&echo &echo &&netstat &&echo &&echo &&echo *********CRONTAB INFO******** &&echo &&echo &&crontab -l &&echo  &&echo &&echo ****MOUNT INFO******** &&echo &&echo &&mount &&echo &&echo &&echo ***********SHELLS********** &&echo &&cat /etc/shells &&echo &&echo &&echo ****** INSTALLED SERVICES******* &&echo &&cat /var/db/var/installed_x_services &&echo &&echo &&echo *******DISKSPACE DETAILS********* &&echo &&echo && df -m /boot /usr /var /tmp /home / &&echo &&echo &&echo ********OSLEVEL DETAILS*******  &&echo &&echo &&uname -a &&echo &&oslevel -s &&echo &&echo &&echo ******W********* &&echo '""" > security_$i.txt; done
